var __extends=this.__extends||function(b,d){function f(){this.constructor=b}f.prototype=d.prototype;b.prototype=new f},com;
(function(b){var d=b.teruhisa||(b.teruhisa={}),d=d.ExifIconEx||(d.ExifIconEx={}),f=new b.drikin.FlickrEx.Base,j="img";void 0!==window.FLICKREX_EXIF_JQUERY_SELECTOR&&(j=window.FLICKREX_EXIF_JQUERY_SELECTOR,delete window.FLICKREX_EXIF_JQUERY_SELECTOR);var n={".":"dot"},c=function(a,c){this.type=a;this.exif=c;this.classPrefix="flickr-exif-icon-"};c.prototype.getValue=function(){return this.exif?this.exif.raw._content:""};c.prototype.getValueBlockClass=function(a){return"text-"+(n[a]||a)+" "+this.classPrefix+
"text"};c.prototype.getBlock=function(a,c,b){return"<"+a+' class="'+this.classPrefix+c+'">'+b+"</"+a+">"};c.prototype.getHtmlBlocks=function(){var a=this.getValue(),c,b="";if(a)for(var d=0;d<a.length;d++)c=a[d],b+=this.getBlock("span",this.getValueBlockClass(c),c);else b=this.getBlock("span","empty","empty");return b};c.prototype.getHtml=function(){return this.getBlock("div",this.type,this.getHtmlBlocks())};d.ExifProperty=c;b=function(a,b){c.call(this,a,b)};__extends(b,c);b.prototype.getValue=function(){return parseFloat(c.prototype.getValue.call(this))+
""};b.prototype.getHtmlBlocks=function(){var a=c.prototype.getHtmlBlocks.call(this);return this.getBlock("span","label","F")+a};d.ExifAperture=b;var e=function(a,b){c.call(this,a,b);this.fraction=!1};__extends(e,c);e.prototype.getValue=function(){var a=c.prototype.getValue.call(this);a&&0===a.indexOf("1/")&&(a=a.substring(2),this.fraction=!0);return a};e.prototype.getHtmlBlocks=function(){var a=c.prototype.getHtmlBlocks.call(this);return(this.fraction?this.getBlock("span","text-frac","1/"):"")+a+
this.getBlock("span","label","S")};d.ExifExposure=e;var g=function(a,b){c.call(this,a,b);this.highiso=!1};__extends(g,c);g.prototype.getValue=function(){var a=c.prototype.getValue.call(this);a&&4<a.length&&(a=a.substring(0,a.length-2),this.highiso=!0);return a};g.prototype.getHtmlBlocks=function(){var a=c.prototype.getHtmlBlocks.call(this);return this.getBlock("span","label","ISO")+a+(this.highiso?this.getBlock("span","text-high","00"):"")};d.ExifISO=g;var l=["aperture","exposure","iso speed"],p=
{aperture:b,exposure:e,"iso speed":g};$(document).ready(function(){for(var a=f.getAllFlickrImageObjects(j),b=0,d=a.length;b<d;b++)(function(){var d=a[b];f.getExif(a[b].id,function(a){var b=a.photo.exif;a="";for(var f=[],e=0,g=b.length;e<g;e++){var h=b[e],k=h.tag.toLowerCase(),j=h.label.toLowerCase(),m=l.indexOf(j);-1!==m&&(h=new p[j](k,h),f[m]=h.getHtml())}if(0<f.length)for(b=0;b<l.length;b++)(e=f[b])?a+=e:(h=new c(k,null),a+=h.getHtml());a&&(k=$("<div class='flickr-exif-icon' style='width:"+d.node.width+
"px'><div class='flickr-exif-icon-block'>"+a+"</div></div>"),$(d.node).after(k))})})()})})(com||(com={}));
