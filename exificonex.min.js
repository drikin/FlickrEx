var __extends=this.__extends||function(g,c){function j(){this.constructor=g}j.prototype=c.prototype;g.prototype=new j},com;
(function(g){var c=g.teruhisa||(g.teruhisa={}),c=c.ExifIconEx||(c.ExifIconEx={}),j={".":"dot"},b=function(a,b){this.type=a;this.exif=b;this.classPrefix="flickr-exif-icon-"};b.prototype.getValue=function(){return this.exif?this.exif.raw._content:""};b.prototype.getValueBlockClass=function(a){return"text-"+(j[a]||a)+" "+this.classPrefix+"text"};b.prototype.getBlock=function(a,b,d){return"<"+a+' class="'+this.classPrefix+b+'">'+d+"</"+a+">"};b.prototype.getHtmlBlocks=function(){var a=this.getValue(),
b,d="";if(a)for(var e=0;e<a.length;e++)b=a[e],d+=this.getBlock("span",this.getValueBlockClass(b),b);else d=this.getBlock("span","empty","empty");return d};b.prototype.getHtml=function(){return this.getBlock("div",this.type,this.getHtmlBlocks())};c.ExifProperty=b;var f=function(a,c){b.call(this,a,c)};__extends(f,b);f.prototype.getValue=function(){return parseFloat(b.prototype.getValue.call(this))+""};f.prototype.getHtmlBlocks=function(){var a=b.prototype.getHtmlBlocks.call(this);return this.getBlock("span",
"label","F")+a};c.ExifAperture=f;var k=function(a,c){b.call(this,a,c);this.fraction=!1};__extends(k,b);k.prototype.getValue=function(){var a=b.prototype.getValue.call(this);a&&0===a.indexOf("1/")&&(a=a.substring(2),this.fraction=!0);return a};k.prototype.getHtmlBlocks=function(){var a=b.prototype.getHtmlBlocks.call(this);return(this.fraction?this.getBlock("span","text-frac","1/"):"")+a+this.getBlock("span","label","S")};c.ExifExposure=k;var h=function(a,c){b.call(this,a,c);this.highiso=!1};__extends(h,
b);h.prototype.getValue=function(){var a=b.prototype.getValue.call(this);a&&4<a.length&&(a=a.substring(0,a.length-2),this.highiso=!0);return a};h.prototype.getHtmlBlocks=function(){var a=b.prototype.getHtmlBlocks.call(this);return this.getBlock("span","label","ISO")+a+(this.highiso?this.getBlock("span","text-high","00"):"")};c.ExifISO=h;var m=["aperture","exposure","iso speed"],p={aperture:f,exposure:k,"iso speed":h};g.drikin.ExifEx.subscribeExifData(function(a,c){for(var d=c.photo.exif,e="",g=[],
f=0,k=d.length;f<k;f++){var l=d[f],h=l.tag.toLowerCase(),j=l.label.toLowerCase(),n=m.indexOf(j);-1!==n&&(l=new p[j](h,l),g[n]=l.getHtml())}if(0<g.length)for(d=0;d<m.length;d++)(f=g[d])?e+=f:(l=new b(h,null),e+=l.getHtml());e&&(e=$("<div class='flickr-exif-icon' style='width:"+a.node.width+"px'><div class='flickr-exif-icon-block'>"+e+"</div></div>"),$(a.node).after(e))})})(com||(com={}));
