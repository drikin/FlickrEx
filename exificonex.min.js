var __extends=this.__extends||function(b,d){function f(){this.constructor=b}for(var g in d)d.hasOwnProperty(g)&&(b[g]=d[g]);f.prototype=d.prototype;b.prototype=new f},com;
(function(b){var d=b.teruhisa||(b.teruhisa={}),d=d.ExifIconEx||(d.ExifIconEx={}),f=new b.drikin.FlickrEx.Base,g="img";void 0!==window.FLICKREX_EXIF_JQUERY_SELECTOR&&(g=window.FLICKREX_EXIF_JQUERY_SELECTOR,delete window.FLICKREX_EXIF_JQUERY_SELECTOR);var n={".":"dot"},c=function(a,c){this.type=a;this.exif=c;this.classPrefix="flickr-exif-icon-"};c.prototype.getValue=function(){return this.exif?this.exif.raw._content:""};c.prototype.getValueBlockClass=function(a){return"text-"+(n[a]||a)+" "+this.classPrefix+
"text"};c.prototype.getBlock=function(a,c,b){return"<"+a+' class="'+this.classPrefix+c+'">'+b+"</"+a+">"};c.prototype.getHtmlBlocks=function(){var a=this.getValue(),c,b="";if(a)for(var d=0;d<a.length;d++)c=a[d],b+=this.getBlock("span",this.getValueBlockClass(c),c);else b=this.getBlock("span","empty","empty");return b};c.prototype.getHtml=function(){return this.getBlock("div",this.type,this.getHtmlBlocks())};d.ExifProperty=c;b=function(a,b){c.call(this,a,b)};__extends(b,c);b.prototype.getValue=function(){return parseFloat(c.prototype.getValue.call(this))+
""};b.prototype.getHtmlBlocks=function(){var a=c.prototype.getHtmlBlocks.call(this);return this.getBlock("span","label","F")+a};d.ExifAperture=b;var j=function(a,b){c.call(this,a,b);this.fraction=!1};__extends(j,c);j.prototype.getValue=function(){var a=c.prototype.getValue.call(this);a&&0===a.indexOf("1/")&&(a=a.substring(2),this.fraction=!0);return a};j.prototype.getHtmlBlocks=function(){var a=c.prototype.getHtmlBlocks.call(this);return(this.fraction?this.getBlock("span","text-frac","1/"):"")+a+
this.getBlock("span","label","S")};d.ExifExposure=j;var h=function(a,b){c.call(this,a,b);this.highiso=!1};__extends(h,c);h.prototype.getValue=function(){var a=c.prototype.getValue.call(this);a&&4<a.length&&(a=a.substring(0,a.length-2),this.highiso=!0);return a};h.prototype.getHtmlBlocks=function(){var a=c.prototype.getHtmlBlocks.call(this);return this.getBlock("span","label","ISO")+a+(this.highiso?this.getBlock("span","text-high","00"):"")};d.ExifISO=h;var l=["aperture","exposure","iso speed"],p=
{aperture:b,exposure:j,"iso speed":h};jQuery(document).ready(function(){for(var a=f.getAllFlickrImageObjects(g),b=0,d=a.length;b<d;b++)(function(){var d=a[b];f.getExif(a[b].id,function(a){var b=a.photo.exif;a="";for(var g=[],f=0,j=b.length;f<j;f++){var k=b[f],e=k.tag.toLowerCase(),h=k.label.toLowerCase(),m=l.indexOf(h);-1!==m&&(k=new p[h](e,k),g[m]=k.getHtml())}if(0<g.length)for(b=0;b<l.length;b++)(f=g[b])?a+=f:(k=new c(e,null),a+=k.getHtml());a&&(e=jQuery(d.node),e=e.width()+parseInt(e.css("border-left-width"),
10)+parseInt(e.css("border-right-width"),10)+parseInt(e.css("margin-left"),10)+parseInt(e.css("margin-right"),10)+parseInt(e.css("padding-left"),10)+parseInt(e.css("padding-right"),10),a=jQuery("<div class='flickr-exif-icon' style='width:"+e+"px'><div class='flickr-exif-icon-block'>"+a+"</div></div>"),jQuery(d.node).before(a),jQuery(d.node).parent().addClass("flickr-exif-container"))})})()})})(com||(com={}));
